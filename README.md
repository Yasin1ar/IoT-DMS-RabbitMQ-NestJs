
# IoT X-ray Data Management System

## Overview
The **IoT X-ray Data Management System** is a robust, scalable, and efficient solution designed to process and manage x-ray data generated by IoT devices. Built on **NestJS**, this system leverages **RabbitMQ** for real-time message processing and **MongoDB** for secure and reliable data storage. It provides a **RESTful API** with comprehensive **Swagger documentation** for seamless integration and testing.

---

## Key Features
- **Real-time Data Processing**: Utilizes **RabbitMQ** to handle and process real-time x-ray signals from IoT devices.
- **Scalable Data Storage**: Employs **MongoDB** with **Mongoose** for efficient and scalable data storage.
- **RESTful API**: Offers a well-documented RESTful API for easy integration with external systems. also **query parameters for filtering supported.**
- **Swagger Documentation**: Includes interactive API documentation for developers.
- **IoT Simulator**: Comes with a built-in **IoT Simulator** that generates and sends mock x-ray data for testing and development purposes.

- **Docker Support**: The system is fully Dockerized, making it easy to deploy and manage in any environment.
- **Environment Configuration**: The `.env` file is used to manage environment-specific configurations, ensuring security and flexibility.
- **Testing**: The system includes a comprehensive test suite to validate functionality and reliability.
---

## Setup Instructions

### 1️⃣ Clone the Repository
Clone the repository to your local machine and navigate to the project directory:
```sh
git clone https://github.com/Yasin1ar/IoT-DMS-RabbitMQ-NestJs
cd IoT-DMS-RabbitMQ-NestJs
```

### 2️⃣ Configure Environment Variables
Create a `.env` file in the root directory to store sensitive credentials. Example:
```sh
MONGODB_USER=yourMongoUser
MONGODB_PASSWORD=yourMongoPassword
RABBITMQ_USER=yourRabbitUser
RABBITMQ_PASSWORD=yourRabbitPassword
```

### 3️⃣ Install Dependencies
Install all required dependencies using npm:
```sh
npm install
```

### 4️⃣ Start RabbitMQ and MongoDB (Docker)
Use Docker Compose to spin up RabbitMQ and MongoDB containers:
```sh
docker-compose up -d
```

### 5️⃣ Run the API
Start the main API server:
```sh
npm run start
```

### 6️⃣ Run the Producer App (Separate Terminal)
Navigate to the producer app directory, install dependencies, and start the producer:
```sh
cd producer-app
npm install
npm run start
```

### 7️⃣ Access API Documentation
Access the interactive Swagger API documentation at:
***http://localhost:3000/api/docs***

### 8️⃣ Run Tests
Execute the test suite to ensure everything is working as expected:
```sh
npm run test
```


## App Architecture
The system is designed with a **microservices architecture** to ensure modularity and scalability. Below is a high-level overview of the architecture:
```
Main API (NestJS)          Producer App (NestJS)
    ⬇️                               ⬇️
Process X-ray Data         Simulates IoT Devices
    ⬇️                               ⬇️
Store in MongoDB           Send to RabbitMQ Queue
    ⬇️                               ⬇️
Provide RESTful API        Run as a Microservice
```
# Signals API Endpoints

This section describes the endpoints provided by the SignalsController and offers sample requests for each endpoint.

## Endpoints Overview

### 1. Retrieve All Xray Records (with Filtering)

**Endpoint:**  
`GET /signals`

**Description:**  
Returns an array of x-ray records. Supports optional filtering via query parameters:

- `deviceId`: Filter records for a specific device.
- `minDataLength` & `maxDataLength`: Filter by the size of the x-ray data.
- `minDataVolume` & `maxDataVolume`: Filter by the overall data volume.
- `startTime` & `endTime`: Filter records within a specific time range (ISO date strings).

**Example Request:**  
Using cURL:
```bash
curl -X GET "http://localhost:3000/signals?deviceId=device123&minDataLength=5&maxDataLength=20&startTime=2023-01-01T00:00:00.000Z&endTime=2023-12-31T23:59:59.999Z"